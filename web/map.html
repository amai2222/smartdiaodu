<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover, user-scalable=no" />
  <meta name="theme-color" content="#0c0c0f" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="format-detection" content="telephone=no" />
  <title>路线地图</title>
  <script src="config.js"></script>
  <link rel="stylesheet" href="map.css" />
</head>
<body class="toolbar-hidden">
  <div id="map"></div>
  <div class="toolbar">
    <div class="toolbar-route-wrap">
      <button type="button" id="btnRouteMenu" title="路线操作">路线 ▾</button>
      <div id="toolbarRouteDropdown" class="toolbar-route-dropdown">
        <button type="button" id="btnRefresh">更新路线</button>
        <button type="button" id="btnRestore">恢复上次线路</button>
      </div>
    </div>
    <a id="btnBackToConsole" href="index.html" target="_self">← 返回</a>
    <button type="button" id="btnStrategy" title="路线策略">策略</button>
    <span id="routeInfo" class="status"></span>
    <button type="button" id="btnCollapse" title="收起菜单">收起</button>
  </div>
  <div id="restrictionHint" class="restriction-hint" style="display: none;" title="限行提示"></div>
  <div id="routeStrategyPanel" class="">
    <button type="button" data-policy="DEFAULT">默认</button>
    <button type="button" data-policy="LEAST_TIME">用时最短</button>
    <button type="button" data-policy="LEAST_DISTANCE">距离最短</button>
    <button type="button" data-policy="LEAST_FEE">费用最省</button>
    <button type="button" data-policy="AVOID_CONGESTION">躲避拥堵</button>
    <button type="button" data-policy="AVOID_HIGHWAY">不走高速</button>
    <button type="button" id="btnOtherRoute">其他线路</button>
  </div>
  <div id="otherRoutesPanel" class="route-options-panel" style="display: none;">
    <div class="route-options-title">选择线路</div>
    <div id="otherRoutesList"></div>
  </div>
  <button type="button" id="btnToggleUI" class="show" title="显示菜单">≡ 菜单</button>
  <div id="navPanel" class="nav-panel" style="display: none;">
    <div id="nextStopText" class="next-stop"></div>
    <div class="btns">
      <a id="btnOpenNav" href="#" target="_blank" rel="noopener" class="btn-nav">打开导航</a>
      <button type="button" id="btnArrived" class="btn-arrived">已到达</button>
    </div>
  </div>
  <div id="allDonePanel" class="nav-panel" style="display: none;">
    <span class="all-done">✅ 全部送达</span>
    <div class="btns">
      <a id="btnOpenNavAllDone" href="#" target="_blank" rel="noopener" class="btn-nav">打开导航</a>
      <a id="btnBackToConsoleFromAllDone" href="index.html" target="_self" class="btn-nav" style="text-align:center;">返回控制台</a>
    </div>
  </div>

  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="map-config.js"></script>
  <script src="map-state.js"></script>
  <script src="map-init.js"></script>
  <script src="map-route.js"></script>
  <script src="map-ui.js"></script>
</body>
</html>
