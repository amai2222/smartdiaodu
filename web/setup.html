<!DOCTYPE html>
<html lang="zh-CN" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0c0c0f" />
  <title>è®¾ç½® Â· é¡ºé£è½¦è°ƒåº¦</title>
  <script src="config.js"></script>
  <script src="console-filter.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: { panel: '#14151a', border: '#2a2d35', muted: '#8b9199', accent: '#3b82f6', success: '#22c55e', danger: '#ef4444' },
          fontSize: { 'console': ['1.125rem', { lineHeight: '1.5' }], 'big': ['1.35rem', { lineHeight: '1.4' }] },
        },
      },
    };
  </script>
  <link rel="stylesheet" href="index.css" />
</head>
<body class="bg-[#0c0c0f] text-gray-100 min-h-screen font-sans antialiased pb-safe">
  <div class="max-w-lg mx-auto flex flex-col min-h-screen">
    <header class="flex items-center justify-center py-4 px-4 border-b border-border flex-shrink-0">
      <h1 class="text-lg font-medium text-gray-100">è®¾ç½®</h1>
    </header>

    <main class="flex-1 overflow-auto px-4 pb-20">
    <div class="mt-6">
      <div class="mb-5">
        <label for="driverPlate" class="block text-muted text-sm font-medium mb-2">ğŸš— è½¦ç‰Œï¼ˆç”¨äºæ¥å•ä¸è·¯çº¿è§„é¿é™è¡Œï¼‰</label>
        <input type="text" id="driverPlate" maxlength="16" placeholder="å¦‚ æ²ªA12345"
          class="w-full bg-panel border border-border rounded-xl px-4 py-3 text-big text-gray-100 placeholder-gray-500" />
        <p class="text-sm text-muted mt-1">ç»‘å®šåæœå¯»è®¢å•ä¸è§„åˆ’çº¿è·¯ä¼šæŒ‰è¯¥è½¦ç‰Œè§„é¿é™è¡ŒåŒºåŸŸã€‚</p>
      </div>
      <h3 class="text-muted text-sm font-medium mb-3 flex items-center gap-2">
        <span aria-hidden="true">ğŸ§ </span> è°ƒåº¦æ¨¡å¼
      </h3>
      <div class="grid grid-cols-1 gap-3">
        <button type="button" data-mode="mode1" class="mode-btn btn-touch rounded-xl border-2 px-4 py-4 text-left flex items-center gap-3 bg-panel border-border hover:border-accent transition-colors">
          <span class="text-2xl">ğŸ“…</span>
          <span class="text-big font-medium">ä¸‹æ¬¡è®¡åˆ’</span>
        </button>
        <button type="button" data-mode="mode2" class="mode-btn btn-touch rounded-xl border-2 px-4 py-4 text-left flex items-center gap-3 bg-panel border-border hover:border-accent transition-colors">
          <span class="text-2xl">ğŸš—</span>
          <span class="text-big font-medium">åŠè·¯å¸å°˜å™¨</span>
        </button>
        <button type="button" data-mode="mode3" class="mode-btn btn-touch rounded-xl border-2 px-4 py-4 text-left flex items-center gap-3 bg-panel border-border hover:border-accent transition-colors">
          <span class="text-2xl">ğŸ”„</span>
          <span class="text-big font-medium">é™„è¿‘æ¥åŠ›</span>
        </button>
        <button type="button" data-mode="pause" class="mode-btn btn-touch rounded-xl border-2 px-4 py-4 text-left flex items-center gap-3 bg-panel border-border hover:border-accent transition-colors">
          <span class="text-2xl">â¸</span>
          <span class="text-big font-medium">åœæ­¢æ¥å•</span>
        </button>
      </div>
      <div id="planPanel" class="mt-4 p-4 rounded-xl bg-[#0c0c0f] border border-border hidden">
        <div id="planList" class="space-y-4 mb-4"></div>
        <button type="button" id="btnAddPlan" class="w-full py-3 rounded-xl border border-dashed border-border text-muted font-medium mb-3">ï¼‹ æ·»åŠ ä¸‹ä¸€æ‰¹è®¡åˆ’</button>
        <p class="text-sm text-muted">æŒ‰æ—¶é—´æ’åºï¼Œä¼˜å…ˆç¬¬ 1 æ‰¹æ‰¾å•ã€‚è®¡åˆ’ä¸åˆ ï¼›å½“å‰æ‰¹è·‘å®Œåç‚¹ã€Œç»“æŸæ‰¾å•ã€å³å¯è¿›å…¥ä¸‹ä¸€æ‰¹ã€‚</p>
      </div>
      <div class="mt-5 pt-4 border-t border-border">
        <p class="text-muted text-sm mb-2">æ¸…ç©ºæœ¬æ¬¡è®¡åˆ’</p>
        <button type="button" id="btnClearWaypointsAndPlan" class="w-full py-3 rounded-xl border border-danger/60 text-danger font-medium hover:bg-danger/20 mb-4">
          æ¸…ç©ºé€”ç»
        </button>
        <p class="text-sm text-muted mb-4">ä»æ•°æ®åº“å–æ¶ˆæœ¬è½¦æ‰€æœ‰å·²åˆ†é…è®¢å•ï¼Œå¹¶æ¸…ç©ºæœ¬åœ°é€”ç»ç‚¹ä¸ä¹˜å®¢åˆ—è¡¨ï¼Œä»…ä¿ç•™å¸æœºä½ç½®ã€‚</p>
        <p class="text-muted text-sm mb-3">ç»•è·¯å®¹å¿åº¦ï¼ˆåˆ†é’Ÿï¼‰</p>
        <div class="flex items-center gap-4">
          <button type="button" id="detourMinus" class="btn-touch w-12 h-12 rounded-xl bg-panel border border-border text-xl font-bold hover:bg-border">âˆ’</button>
          <span id="detourVal" class="text-big font-semibold min-w-[3rem] text-center">15</span>
          <button type="button" id="detourPlus" class="btn-touch w-12 h-12 rounded-xl bg-panel border border-border text-xl font-bold hover:bg-border">+</button>
        </div>
        <p class="text-muted text-sm mt-4 mb-3">é«˜æ”¶ç›Šé—¨æ§›ï¼ˆå…ƒï¼‰</p>
        <div class="flex items-center gap-4">
          <button type="button" id="profitMinus" class="btn-touch w-12 h-12 rounded-xl bg-panel border border-border text-xl font-bold hover:bg-border">âˆ’</button>
          <span id="profitVal" class="text-big font-semibold min-w-[3rem] text-center">100</span>
          <button type="button" id="profitPlus" class="btn-touch w-12 h-12 rounded-xl bg-panel border border-border text-xl font-bold hover:bg-border">+</button>
        </div>
      </div>
    </div>
    <p id="setupStatus" class="mt-4 text-sm text-muted"></p>
    </main>

    <!-- åº•éƒ¨å¯¼èˆªæ ï¼ˆä¸é¦–é¡µä¸€è‡´ï¼‰ï¼›å†…åµŒåœ¨é¦–é¡µ iframe æ—¶é€šè¿‡ postMessage åˆ‡æ¢è§†å›¾ï¼Œä¸æ•´é¡µè·³è½¬ -->
    <nav id="bottomNav" class="fixed bottom-0 left-0 right-0 max-w-lg mx-auto flex items-stretch bg-panel border-t border-border z-1000 pb-safe">
      <a id="setupNavHome" href="index.html" class="nav-tab flex-1 py-3 flex flex-col items-center gap-1 border-t-2 border-transparent bg-panel text-gray-100 no-underline">
        <span class="text-lg">ğŸ </span>
        <span class="text-xs font-medium">é¦–é¡µ</span>
      </a>
      <a id="setupNavMap" href="index.html#map" class="nav-tab flex-1 py-3 flex flex-col items-center gap-1 border-t-2 border-transparent bg-panel text-gray-100 no-underline">
        <span class="text-lg">ğŸ—ºï¸</span>
        <span class="text-xs font-medium">åœ°å›¾</span>
      </a>
      <span class="nav-tab active flex-1 py-3 flex flex-col items-center gap-1 border-t-2 bg-panel cursor-default">
        <span class="text-lg">âš™ï¸</span>
        <span class="text-xs font-medium">è®¾ç½®</span>
      </span>
    </nav>
  </div>

  <script>
  (function () {
    if (window === window.top) return;
    var nav = document.getElementById("bottomNav");
    if (nav) nav.style.display = "none";
    var home = document.getElementById("setupNavHome");
    var map = document.getElementById("setupNavMap");
    function send(type) {
      try { window.parent.postMessage({ type: type }, "*"); } catch (e) {}
    }
    if (home) { home.addEventListener("click", function (e) { e.preventDefault(); send("smartdiaodu_show_home"); }); }
    if (map) { map.addEventListener("click", function (e) { e.preventDefault(); send("smartdiaodu_show_map"); }); }
  })();
  </script>
  <script src="https://unpkg.com/@supabase/supabase-js@2" defer></script>
  <script src="index-config.js" defer></script>
  <script src="index-state.js" defer></script>
  <script src="auth.js" defer></script>
  <script src="setup.js" defer></script>
</body>
</html>
